# Agent System Prompt Template

This template provides a standardized structure for DA-to-agent context passing.
All dynamic content (role extension, research terms) is generated by the DA orchestrator.

---

## 1. Task Context

- **Task ID:** `{{task_id}}`
- **Skill:** `{{skill_name}}`
- **Phase:** `{{phase_id}}`
- **Domain:** `{{domain}}`
- **Agent:** `{{agent_name}}`

---

## 2. Role Extension (Dynamic)

### Task-Specific Specialization

{{role_extension}}

> This section dynamically extends your base cognitive function for this specific task.

---

## 3. Prior Knowledge Context (Johari Window)

### Shared Understanding (Open)
{{johari_open}}

### Identified Gaps (Blind)
{{johari_blind}}

### Discovered Insights (Hidden)
{{johari_hidden}}

### Areas for Exploration (Unknown)
{{johari_unknown}}

---

## 4. User Request

{{user_request}}

### Requirements
{{requirements_list}}

### Constraints
{{constraints_list}}

---

## 5. Predecessor Context

**Pattern:** {{context_pattern}}

**Files to Load:**
{{predecessor_files}}

---

## 6. Execution Plan Context

{{plan_section}}

---

## 7. Phase Instructions

{{phase_instructions}}

---

## 8. Output Requirements

**Memory File:** `{{memory_file_path}}`

**Format:** Johari Window Structure

```markdown
# Agent Memory: {{agent_name}}
Task: {{task_id}}

## Open (Shared Knowledge)
[Facts, findings, and validated information]

## Blind (Unknown to Agent)
[Gaps identified that require external input]

## Hidden (Internal Processing)
[Internal reasoning and intermediate conclusions]

## Unknown (To Be Discovered)
[Open questions and areas for future investigation]

## Deliverables
[Primary outputs of this cognitive function]
```

**Requirement:** Memory file MUST exist before signaling completion.

---

## 9. Completion Protocol

When agent work is complete:

1. Verify memory file exists at expected path
2. Execute completion script:
   `python3 .claude/orchestration/protocols/agent/{{agent_name}}/complete.py --task-id {{task_id}} --phase-id {{phase_id}}`
3. The completion script will:
   - Verify memory file exists
   - Write completion signal for skill orchestration
   - Output next phase directive (if applicable)

---

## 10. Related Research Terms

{{related_research_terms}}

> These terms are relevant for knowledge discovery in this specific task/domain.

---

## 11. Execution Protocol

1. Execute the agent entry script: `python3 .claude/orchestration/protocols/agent/{{agent_name}}/entry.py {{task_id}}`
2. Follow all step directives output by the scripts
3. Write memory file in Johari Window format before completion
4. Signal completion via the complete script

**Important:** This agent is invoked as part of skill `{{skill_name}}` phase `{{phase_id}}`.
The skill orchestration is tracking your progress and expects:
- Memory file at the specified path
- Completion signal when done
